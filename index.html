<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>NBA Shot Prediction and Analysis by hwchase17</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">NBA Shot Prediction and Analysis</h1>
      <h2 class="project-tagline">Raymond Cen, Harrison Chase, Carlos Pena-Lobel, Daniel Silberwasser</h2>
      <a href="https://github.com/hwchase17/sportvu" class="btn">View on GitHub</a>
      <a href="https://github.com/hwchase17/sportvu/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/hwchase17/sportvu/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h3>
<a id="motivation" class="anchor" href="#motivation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Motivation</h3>

<p>Prior to the 2013-2014 NBA season, SportVu tracking cameras were installed in all 30 NBA arenas. These six cameras would use cutting edge technology to track the exact location of all players, ref and the ball 25 times a second. This tracking data could later be used by teams, the league and privately run companies to provide new insights and analysis about the game of basketball.</p>

<p>Although most of this data is heavily guarded, a small portion is available publicly on NBA.com. It is our hope to use this data, combining it with the previously available play-by-play and shot chart data, to create a model that will give us the probability that a given shot will go in. With this model we will explore many insights that could prove valuable to fans and teams alike.</p>

<p>Some prior work in this area has been done, and it was these projects which partially inspired us to do this. These projects are, in no particular order:</p>

<ul>
<li>John Ezekowitz et all. on <a href="http://www.sloansportsconference.com/wp-content/uploads/2014/02/2014_SSAC_The-Hot-Hand-A-New-Approach.pdf">The Hot Hand</a>
</li>
<li>Yu-Han Chang et all. on <a href="http://www.sloansportsconference.com/wp-content/uploads/2014/02/2014-SSAC-Quantifying-Shot-Quality-in-the-NBA.pdf">Quantifying Shot Quality in the NBA</a>
</li>
<li>Krishna Narsu with his <a href="http://nyloncalculus.com/2015/09/28/introducing-kobe-a-measure-of-shot-quality/">KOBE model</a>
</li>
</ul>

<h3>
<a id="objectives" class="anchor" href="#objectives" aria-hidden="true"><span class="octicon octicon-link"></span></a>Objectives</h3>

<ol>
<li>Create a model that will give us a probability of each shot going in. The three main techniques we will pursue are: 

<ul>
<li>Logistic Regression with l1 (Lasso) Regularization</li>
<li>Logistic Regression with l2 (Ridge) Regularization</li>
<li>Random Forest</li>
</ul>
</li>
<li>Explore how shot difficulty and shooting percentage above expected vary with quarter and time left in the game</li>
<li>Explore how shot difficulty and shooting percentage above expected vary with score differential.</li>
<li>Quantify which players take the highest percentage shots and which players score the most above their projected output.</li>
<li>Quantify which players increase their teammates' expected points per shot the most.</li>
</ol>

<h3>
<a id="data" class="anchor" href="#data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Data</h3>

<p>The first type of data that we want to get is the SportVu tracking data for all shots. These shots are sorted by player and are located on the <a href="http://stats.nba.com/player/#!/201939/tracking/shotslogs/">'Shot Log' page of their player profile</a>.</p>

<p><img src="https://raw.githubusercontent.com/hwchase17/sportvu/gh-pages/pictures/shotlogdata.png" alt="Shot Log Data"></p>

<p>The next type of data that we need is the data from the NBA.com shot charts. This provides us with new information like the type of shot, general area (Right, Left, Middle) of each shot, and x,y coordinates.</p>

<p><img src="https://raw.githubusercontent.com/hwchase17/sportvu/gh-pages/pictures/shotchartdata.png" alt="Shot Chart Data"></p>

<p>Finally, we have out last set of data, play by play for each game. This dataset will provide us with other key pieces of information we need for our insights that we don't already have, like score differential at time of shot, whether the action before was a turnover (to identify fast break opportunities) and the ids of the players who are on the court.</p>

<p><img src="https://raw.githubusercontent.com/hwchase17/sportvu/gh-pages/pictures/playbyplaydata.png" alt="Play by Play Data"></p>

<h3>
<a id="model" class="anchor" href="#model" aria-hidden="true"><span class="octicon octicon-link"></span></a>Model</h3>

<p>We built several models with the data, experimenting with logistic regression with l1 and l2 penalties, the best of which predicts with 65% accuracy whether a given shot will go on, significantly better than any publicly available model available thus far. This model allows us to see how different players perform compared to an average player taking that shot. This model takes into account the distance from the basket, the distance from the nearest defender, the type of shot, the amount time the player held onto the ball before the shot, and a couple other key variables that were captured by the NBA play by play cameras. Below is a chart of the key variables as sorted by feature importance from the random forest model that we built.</p>

<p><img src="https://raw.githubusercontent.com/hwchase17/sportvu/gh-pages/pictures/unknown-1.png" alt="Features"></p>

<h3>
<a id="analysis" class="anchor" href="#analysis" aria-hidden="true"><span class="octicon octicon-link"></span></a>Analysis</h3>

<p>In the NBA, teams are allotted 24 seconds to shoot. The graph below shows that on average, teams use up more of the 24 seconds as the game progresses. The cause is unclear, but one can hypothesize that two factors combine to create this effect. First, teams take longer to find a good shot as the game progresses because teams are adjusting to their opponents strategies as the game progresses. Second, teams struggle to find good shots as the game progresses because they get tired. </p>

<p><img src="https://raw.githubusercontent.com/hwchase17/sportvu/gh-pages/pictures/shotclock.png" alt="Shot Clock"></p>

<p>In order to understand what factors might cause a team to take longer to shoot every quarter, we broke down the time by quarter and by the current score differential for the shooting team. We hypothesized that teams in the lead might try to kill time and teams falling behind might try to shoot more quickly. This effect reveals itself in the visualization, but only for data from the fourth quarter. This makes sense however, because teams feel more time pressure in the fourth quarter than any other. </p>

<p><img src="https://raw.githubusercontent.com/hwchase17/sportvu/gh-pages/pictures/shotclockperquarter.png" alt="Shot by Quarter"></p>

<p>This next graph shows that the average probability of a shot going in decreases by quarter, likely for the same reasons teams take longer to shoot as the game progresses: fatigue and adjusted strategies. </p>

<p><img src="https://raw.githubusercontent.com/hwchase17/sportvu/gh-pages/pictures/shotprob.png" alt="Shot Prob over Game"></p>

<p>Two different components go into all points scored. First is the expected points per shot, and then there points scored above/below average. For example, if our model says Steph Curry has a 40% chance of scoring a given three pointer, then his expected points on that shot is 1.2. If he makes the shot then his points above expected on that shot is 1.8, if he misses it then it is -1.2. We can average these components for all of a player's shots to get there average expected points and average points above expectation. We found those components for all players, and then plotted them on a graph. Going clockwise, the upper right quadrant is players who take easy shots and make them at a higher than expected rate, the bottom right is players that take hard shots and make them at a higher than expected rate, the bottom left is players who take tough shots and don't make them a lot, and then the upper left is players who take easy shots and don't make them a lot.</p>

<p>Of course, a player's expected points per shot is in turn affected by multiple things. There is the ability of the player himself to get good looks, there is the ability of his teammates to get him good looks, and then there is the ability of the defense to stop him from getting good looks. Running a massive ridge regression with the expected points for a shot as the dependent variable and then dummy variables for who is on the court (three possible types: one for the shooter, one for each player on offense but not shooting, and then one for each player on defense), we can get three coefficients for each player: their ability to get good shoots, their ability to help their teammates get good shots, and their ability to prevent opponents from getting good shots. Below we have plotted scatterplots reflecting a few of those stats.</p>

<p>Ability to get good shots vs. Ability to get teammates good shots</p>

<p>Ability to get teammates good shots vs. Points Above Expected </p>

<p>Ability to get teammates good shots vs. Ability to prevent opponents from getting good shots</p>

<h3>
<a id="support-or-contact" class="anchor" href="#support-or-contact" aria-hidden="true"><span class="octicon octicon-link"></span></a>Support or Contact</h3>

<p>Having trouble with Pages? Check out our <a href="https://help.github.com/pages">documentation</a> or <a href="https://github.com/contact">contact support</a> and we’ll help you sort it out.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/hwchase17/sportvu">NBA Shot Prediction and Analysis</a> is maintained by <a href="https://github.com/hwchase17">hwchase17</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
